(this["webpackJsonpgiphy-browser"]=this["webpackJsonpgiphy-browser"]||[]).push([[0],{22:function(t,e,n){t.exports={container:"SearchBar_container__2opyN",sticky:"SearchBar_sticky__1v4gV"}},26:function(t,e,n){t.exports={container:"Details_container__2IOJU"}},32:function(t,e,n){t.exports={loader:"Loader_loader__1uQi3",loader1:"Loader_loader1__1DRXO",loader2:"Loader_loader2__3I8A0",loader3:"Loader_loader3__6XFpi"}},33:function(t,e,n){t.exports={container:"NoResult_container__1MQ8S"}},34:function(t,e,n){t.exports={grid:"List_grid__2pV7n"}},35:function(t,e,n){t.exports={app:"App_app__3fr4t"}},47:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(0),a=n.n(i),c=n(16),s=n.n(c),o=n(7),u=n(4),d=n.n(u),l=n(8),f=n(14),h=n(30),j=n(31),b=new(function(){function t(e){Object(h.a)(this,t),this.baseUrl=void 0,this.apikey=void 0,this.baseUrl="https://api.giphy.com/v1/gifs",this.apikey=e}return Object(j.a)(t,[{key:"buildUrl",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new URL("".concat(this.baseUrl,"/").concat(t)),r=0,i=Object.entries(e);r<i.length;r++){var a=Object(f.a)(i[r],2),c=a[0],s=a[1];n.searchParams.append(c,s)}return n.searchParams.append("api_key",this.apikey),n.toString()}},{key:"fetchTrending",value:function(){var t=Object(l.a)(d.a.mark((function t(e,n){var r,i,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.buildUrl("trending",{offset:e,limit:n,rating:"g"}),t.next=3,fetch(r);case 3:return i=t.sent,t.next=6,i.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"fetchGifs",value:function(){var t=Object(l.a)(d.a.mark((function t(e,n,r){var i,a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.buildUrl("search",{q:e,offset:n,limit:r,rating:"g"}),t.next=3,fetch(i);case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"fetchGifById",value:function(){var t=Object(l.a)(d.a.mark((function t(e){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.buildUrl(e),t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(""),p=n(10),g=n(2),O=n(15),v=n(27),x=n(32),m=n.n(x);var w=function(t){return Object(r.jsxs)("div",Object(O.a)(Object(O.a)({className:m.a.loader},t),{},{children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]}))},y=n(22),_=n.n(y);var k=function(t){var e=t.width,n=t.defaultValue,a=t.onSubmit,c=Object(i.useRef)(null),s=Object(i.useState)(!1),o=Object(f.a)(s,2),u=o[0],d=o[1],l=Object(i.useState)(n||""),h=Object(f.a)(l,2),j=h[0],b=h[1],p=u?_.a.sticky:"",g="".concat(_.a.container," ").concat(p),O={width:e},v={paddingRight:10,paddingLeft:38,width:e-38-10},x=function(){if(c.current){var t=window.scrollY>c.current.getBoundingClientRect().bottom;d(!!t)}};return Object(i.useEffect)((function(){return window.addEventListener("scroll",x,{passive:!0}),function(){window.removeEventListener("scroll",x)}}),[]),Object(i.useEffect)((function(){b(n||"")}),[n]),Object(r.jsx)("div",{ref:c,className:g,style:O,children:Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a(j)},children:[Object(r.jsx)("label",{children:Object(r.jsx)("i",{className:"material-icons",children:"search"})}),Object(r.jsx)("input",{type:"text",placeholder:"Search GIFs...",value:j,onChange:function(t){var e=t.target.value;b(e)},style:v})]})})};function I(t){var e=t.id,n=t.url,i=t.title,a=t.width,c=t.height,s=t.x,o=t.y,u={position:"absolute",transform:"translate3d(".concat(s,"px, ").concat(o,"px, 0px)"),background:"rgb(0, 255, 153)",width:a,height:c};return Object(r.jsx)(p.b,{to:"/".concat(e),style:u,children:Object(r.jsx)("div",{style:{width:a,height:c},children:Object(r.jsx)("picture",{children:Object(r.jsx)("img",{src:n,width:a,height:c,alt:i})})})})}var S=n(33),C=n.n(S);var E=function(){return Object(r.jsx)("div",{className:C.a.container,children:Object(r.jsx)("h3",{children:"No GIFs found"})})},L=function(t,e){return new URLSearchParams(t).get(e)},N=function(t,e){return t.trending_datetime>e.trending_datetime?-1:t.trending_datetime===e.trending_datetime?0:1},U=function(t,e,n){var r=e/t;return Math.floor(n*r)},B=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={offset:n,limit:e};return t&&(r.q=t),r},G=n(11),M=Object(G.b)("gifs/fetchById",function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.fetchGifById(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),R=Object(G.b)("gifs/fetchGifs",function(){var t=Object(l.a)(d.a.mark((function t(e){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.q,r=e.offset,i=e.limit,!n){t.next=5;break}return t.next=4,b.fetchGifs(n,r,i);case 4:return t.abrupt("return",t.sent);case 5:return t.next=7,b.fetchTrending(r,i);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),q=Object(G.c)({name:"list",initialState:{gifs:{byId:{}},pagination:{totalCount:0},loading:"idle"},reducers:{clearGifs:function(t){t.gifs={byId:{}},t.pagination={totalCount:0},t.loading="idle"}},extraReducers:function(t){t.addCase(M.fulfilled,(function(t,e){var n=e.payload;t.gifs.byId[n.id]=n})),t.addCase(R.pending,(function(t){"idle"===t.loading&&(t.loading="pending")})),t.addCase(R.fulfilled,(function(t,e){if("pending"===t.loading){var n=e.payload,r=n.data,i=n.pagination.total_count;r.forEach((function(e){t.gifs.byId[e.id]=e})),t.pagination.totalCount=i,t.loading="idle"}}))}}),H=q.actions.clearGifs,T=function(t){return Object.values(t.list.gifs.byId)},D=function(t){return t.list.pagination.totalCount},F=function(t){return t.list.loading},V=q.reducer,z=n(34),A=n.n(z);var J=function(t){var e=t.numCols,n=t.gutter,a=t.width,c=t.pageSize,s=Object(g.f)(),u=Object(g.g)(),d=Object(o.b)(),l=Object(i.useRef)(null),f=L(u.search,"q"),h=Object(o.c)(F),j=Object(o.c)(D),b=Object(o.c)(T).sort(N),p=Object(i.useMemo)((function(){return function(t,e,n,i){var a=Math.floor((i-n*(e-1))/e),c=Array(e).fill(0),s=t.map((function(t){var e=t.id,i=t.title,s=t.images.fixed_width,o=s.width,u=s.height,d=s.url,l=U(parseInt(o),a,parseInt(u)),f=c.indexOf(Math.min.apply(Math,Object(v.a)(c))),h={id:e,url:d,title:i,x:f*(a+n),y:c[f],width:a,height:l};return c[f]+=l+n,Object(r.jsx)(I,Object(O.a)({},h),e)}));return{maxHeight:Math.max.apply(Math,Object(v.a)(c)),children:s}}(b,e,n,a)}),[b,e,n,a]),x=p.maxHeight,m=p.children,y=m.length>=c,_={width:a,height:x},S=Object(i.useCallback)((function(){if(window.innerHeight+window.scrollY>=document.body.offsetHeight&&b.length<j&&"idle"===h){var t=B(f,c,b.length);d(R(t))}}),[d,c,f,h,j,b.length]);return Object(i.useEffect)((function(){return window.addEventListener("scroll",S,{passive:!0}),function(){window.removeEventListener("scroll",S)}}),[S]),Object(i.useEffect)((function(){if("idle"===h){d(H());var t=B(f,c);d(R(t))}}),[d,c,f]),Object(r.jsxs)("div",{children:[Object(r.jsx)(k,{width:a,defaultValue:f,onSubmit:function(t){t?s.push({pathname:"/search",search:"?q=".concat(t)}):s.push({pathname:"/"})}}),Object(r.jsxs)("div",{ref:l,className:A.a.grid,style:_,children:[y&&m,!y&&"pending"!==h&&Object(r.jsx)(E,{})]}),"pending"===h&&Object(r.jsx)(w,{})]})},P=n(26),Q=n.n(P);var W=function(t){var e=t.id,n=Object(o.b)(),a=Object(o.c)((function(t){return function(t,e){return t.list.gifs.byId[e]}(t,e)}));if(Object(i.useEffect)((function(){a||n(M(e))}),[n,a,e]),!a)return Object(r.jsx)("div",{className:Q.a.container,children:Object(r.jsx)(w,{style:{marginTop:100}})});var c=a.title,s=a.images.original,u=s.url,d=s.width,l=s.height,f={width:d,height:l};return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:Q.a.container,style:f,children:[Object(r.jsx)("picture",{children:Object(r.jsx)("img",{src:u,width:d,height:l,alt:c})}),Object(r.jsx)("p",{children:c})]})})};function X(){var t=Object(g.g)().pathname;return Object(i.useEffect)((function(){setTimeout((function(){window.scrollTo(0,0)}),50)}),[t]),null}var Y=n(35),K=n.n(Y);var $=function(){return Object(r.jsxs)(p.a,{basename:"/giphy-browser",children:[Object(r.jsx)(X,{}),Object(r.jsx)("div",{className:K.a.app,children:Object(r.jsxs)(g.c,{children:[Object(r.jsx)(g.a,{exact:!0,path:["/","/search"],children:Object(r.jsx)("section",{children:Object(r.jsx)(J,{numCols:4,gutter:16,width:1040,pageSize:35})})}),Object(r.jsx)(g.a,{path:"/:id",render:function(t){var e=t.match;return Object(r.jsx)("section",{children:Object(r.jsx)(W,{id:e.params.id})})}})]})})]})},Z=Object(G.a)({reducer:{list:V}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(47);b.apikey="g8FtLBjCNKzd6HuDEfNOOqrxlv9pCSx0",s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(o.a,{store:Z,children:Object(r.jsx)($,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.bc98ccf4.chunk.js.map